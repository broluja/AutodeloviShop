{% extends 'base.html' %}
{% load static %}

{% block title %}{{ part }}{% endblock title %}
{% block content %}

<div class="site__body">
    <div class="block-header block-header--has-breadcrumb block-header--has-title">
        <div class="container">
            <div class="block-header__body">
                <h1 class="block-header__title">Karoserijski auto delovi | {{part}}{% if model %} | {{model}} {% endif %}</h1>
            </div>
        </div>
    </div>

    {% if articles %}
    <div class="block-split">
        <div class="container">
            <div class="block-split__row row no-gutters">
                <div class="block-split__item block-split__item-content col-auto">
                    <div class="block">
                        <div class="products-view">
                            <div class="products-view__options view-options view-options--offcanvas--always">
                                <div class="view-options__body">
                                    <div class="view-options__layout layout-switcher">
                                        <div class="layout-switcher__list">
                                            <button type="button" class="layout-switcher__button layout-switcher__button--active" data-layout="list" data-with-features="true">
                                                <svg width="16" height="16">
                                                    <path d="M15.2,16H0.8C0.4,16,0,15.6,0,15.2V9.8C0,9.4,0.4,9,0.8,9h14.4C15.6,9,16,9.4,16,9.8v5.4C16,15.6,15.6,16,15.2,16z M15.2,7 H0.8C0.4,7,0,6.6,0,6.2V0.8C0,0.4,0.4,0,0.8,0h14.4C15.6,0,16,0.4,16,0.8v5.4C16,6.6,15.6,7,15.2,7z" />
                                                </svg>
                                            </button>
                                            <button type="button" class="layout-switcher__button" data-layout="table" data-with-features="false">
                                                <svg width="16" height="16">
                                                    <path d="M15.2,16H0.8C0.4,16,0,15.6,0,15.2v-2.4C0,12.4,0.4,12,0.8,12h14.4c0.4,0,0.8,0.4,0.8,0.8v2.4C16,15.6,15.6,16,15.2,16z M15.2,10H0.8C0.4,10,0,9.6,0,9.2V6.8C0,6.4,0.4,6,0.8,6h14.4C15.6,6,16,6.4,16,6.8v2.4C16,9.6,15.6,10,15.2,10z M15.2,4H0.8 C0.4,4,0,3.6,0,3.2V0.8C0,0.4,0.4,0,0.8,0h14.4C15.6,0,16,0.4,16,0.8v2.4C16,3.6,15.6,4,15.2,4z" />
                                                </svg>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="view-options__legend">
                                        Prikaz {{on_page}} proizvoda
                                    </div>
                                    <div class="view-options__spring"></div>
                                </div>
                            </div>
                            <div class="products-view__list products-list products-list--grid--6" data-layout="list" data-with-features="true">
                                <div class="products-list__head">
                                    <div class="products-list__column products-list__column--image">Slika</div>
                                    <div class="products-list__column products-list__column--meta">ID</div>
                                    <div class="products-list__column products-list__column--product">Proizvod</div>
                                    <div class="products-list__column products-list__column--price">Cena(RSD)</div>
                                </div>
                                <div class="products-list__content">
                                    {% for article in articles %}
                                    <div id="{{ article.gbg_id }}" hidden>
                                        <div id="desctiption">{{article.description}}</div>
                                    </div>
                                    <div class="products-list__item">
                                        <div class="product-card">
                                            <div class="product-card__actions-list">
                                                <button class="product-card__action product-card__action--quickview" id="{{article.gbg_id}}" type="button" aria-label="Quick view">
                                                    <svg width="16" height="16">
                                                        <path d="M14,15h-4v-2h3v-3h2v4C15,14.6,14.6,15,14,15z M13,3h-3V1h4c0.6,0,1,0.4,1,1v4h-2V3z M6,3H3v3H1V2c0-0.6,0.4-1,1-1h4V3z M3,13h3v2H2c-0.6,0-1-0.4-1-1v-4h2V13z" />
                                                    </svg>
                                                </button>
                                                <button class="product-card__action product-card__action--wishlist" type="button" aria-label="Add to wish list">
                                                    <svg width="16" height="16">
                                                        <path d="M13.9,8.4l-5.4,5.4c-0.3,0.3-0.7,0.3-1,0L2.1,8.4c-1.5-1.5-1.5-3.8,0-5.3C2.8,2.4,3.8,2,4.8,2s1.9,0.4,2.6,1.1L8,3.7 l0.6-0.6C9.3,2.4,10.3,2,11.3,2c1,0,1.9,0.4,2.6,1.1C15.4,4.6,15.4,6.9,13.9,8.4z" />
                                                    </svg>
                                                </button>
                                                <button class="product-card__action product-card__action--compare" type="button" aria-label="Add to compare">
                                                    <svg width="16" height="16">
                                                        <path d="M9,15H7c-0.6,0-1-0.4-1-1V2c0-0.6,0.4-1,1-1h2c0.6,0,1,0.4,1,1v12C10,14.6,9.6,15,9,15z" />
                                                        <path d="M1,9h2c0.6,0,1,0.4,1,1v4c0,0.6-0.4,1-1,1H1c-0.6,0-1-0.4-1-1v-4C0,9.4,0.4,9,1,9z" />
                                                        <path d="M15,5h-2c-0.6,0-1,0.4-1,1v8c0,0.6,0.4,1,1,1h2c0.6,0,1-0.4,1-1V6C16,5.4,15.6,5,15,5z" />
                                                    </svg>
                                                </button>
                                            </div>
                                            <div class="product-card__image">
                                                <div class="image image--type--product">
                                                    <a href="{% url 'item:product_details' article.gbg_id %}" class="image__body">
                                                        <img class="image__tag" src="{{article.image}}" alt="">
                                                    </a>
                                                </div>
                                                {%if article.stock == '1' %}
                                                <div class="status-badge status-badge--style--success product-card__fit status-badge--has-icon status-badge--has-text">
                                                    <div class="status-badge__body">
                                                        <div class="status-badge__icon"><svg width="13" height="13">
                                                                <path d="M12,4.4L5.5,11L1,6.5l1.4-1.4l3.1,3.1L10.6,3L12,4.4z" />
                                                            </svg>
                                                        </div>
                                                        <div class="status-badge__text">Na stanju - {{article.model}}</div>
                                                        <div class="status-badge__tooltip" tabindex="0" data-toggle="tooltip" title="{{article.model}}"></div>
                                                    </div>
                                                </div>
                                                {% else %}
                                                <div class="status-badge status-badge--style--success product-card__fit status-badge--has-icon status-badge--has-text">
                                                    <div class="status-badge__body" style="background-color:white;width:246px;">
                                                        <div class="status-badge__tooltip" tabindex="0" data-toggle="tooltip" title="{{article.model}}"></div>
                                                        <button hx-target="#modal-dialog" hx-get="{% url 'ask_for_parts' %}?item={{article.model}}&part={{article.gbg_id}}" type="button" class="btn btn-primary" style="width: 270px; border-radius:5px;">Pošaljite upit za proveru stanja</button>
                                                    </div>

                                                </div>
                                                {% endif %}
                                            </div>
                                            <div class="product-card__info">
                                                <div class="product-card__meta"><span class="product-card__meta-title">ID:</span> {{article.genuine_code}}</div>
                                                <div class="product-card__name" style="width:400px;">
                                                    <div>
                                                        <div class="product-card__badges">
                                                            <div class="tag-badge tag-badge--new">Novo</div>
                                                        </div>
                                                        <a href="{% url 'item:product_details' article.gbg_id %}">{{article.description}}</a>
                                                    </div>
                                                </div>
                                                <div class="product-card__name" style="width:100px;">
                                                    <div>
                                                        <small>Marka: {{ article.model }}</small>
                                                    </div>
                                                </div>
                                                <div class="product-card__rating">
                                                    <div class="rating product-card__rating-stars">
                                                        <div class="rating__body">
                                                            <a href="{% url 'item:product_details' article.gbg_id %}" class="btn btn-info" style="border-radius:5px;" role="button">Detalji</a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="product-card__footer">
                                                <div class="product-card__prices">
                                                    <div class="product-card__price product-card__price--current">{{ article.price|floatformat:"2g" }} rsd</div>
                                                </div>
                                                <button class="product-card__addtocart-icon" type="button" aria-label="Dodaj u korpu">
                                                    <svg width="20" height="20">
                                                        <circle cx="7" cy="17" r="2" />
                                                        <circle cx="15" cy="17" r="2" />
                                                        <path d="M20,4.4V5l-1.8,6.3c-0.1,0.4-0.5,0.7-1,0.7H6.7c-0.4,0-0.8-0.3-1-0.7L3.3,3.9C3.1,3.3,2.6,3,2.1,3H0.4C0.2,3,0,2.8,0,2.6 V1.4C0,1.2,0.2,1,0.4,1h2.5c1,0,1.8,0.6,2.1,1.6L5.1,3l2.3,6.8c0,0.1,0.2,0.2,0.3,0.2h8.6c0.1,0,0.3-0.1,0.3-0.2l1.3-4.4 C17.9,5.2,17.7,5,17.5,5H9.4C9.2,5,9,4.8,9,4.6V3.4C9,3.2,9.2,3,9.4,3h9.2C19.4,3,20,3.6,20,4.4z" />
                                                    </svg>
                                                </button>
                                                {% if article.stock == '1' %}
                                                <button class="product-card__addtocart-full"
                                                        style="border-radius:5px;"
                                                        type="button"
                                                        id="dodaj_korpa"
                                                        podaci="{{article}}"
                                                >
                                                    Dodaj u korpu
                                                </button>
                                                {% endif %}
                                                <button class="product-card__wishlist" type="button">
                                                    <svg width="16" height="16">
                                                        <path d="M13.9,8.4l-5.4,5.4c-0.3,0.3-0.7,0.3-1,0L2.1,8.4c-1.5-1.5-1.5-3.8,0-5.3C2.8,2.4,3.8,2,4.8,2s1.9,0.4,2.6,1.1L8,3.7 l0.6-0.6C9.3,2.4,10.3,2,11.3,2c1,0,1.9,0.4,2.6,1.1C15.4,4.6,15.4,6.9,13.9,8.4z" />
                                                    </svg>
                                                    <span>Dodaj u listu želja</span>
                                                </button>
                                                <button class="product-card__compare" type="button">
                                                    <svg width="16" height="16">
                                                        <path d="M9,15H7c-0.6,0-1-0.4-1-1V2c0-0.6,0.4-1,1-1h2c0.6,0,1,0.4,1,1v12C10,14.6,9.6,15,9,15z" />
                                                        <path d="M1,9h2c0.6,0,1,0.4,1,1v4c0,0.6-0.4,1-1,1H1c-0.6,0-1-0.4-1-1v-4C0,9.4,0.4,9,1,9z" />
                                                        <path d="M15,5h-2c-0.6,0-1,0.4-1,1v8c0,0.6,0.4,1,1,1h2c0.6,0,1-0.4,1-1V6C16,5.4,15.6,5,15,5z" />
                                                    </svg>
                                                    <span>Uporedi</span>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                            <div class="products-view__pagination">

                                <!-- Paginacija -->
                                <nav aria-label="Page navigation example">
                                    <ul class="pagination">

                                        {% if page > 1 %}
                                            <li class="page-item">
                                                <a class="page-link page-link--with-arrow" href="{% url 'search_parts' %}?search={{part}}{% if model %}&modelSearch={{my_car.my_model}}{%endif%}"><<</a>
                                            </li>
                                            <li class="page-item">
                                                <a class="page-link page-link--with-arrow" href="{% url 'search_parts' %}?search={{part}}&page={{page|add:'-1'}}{% if model %}&modelSearch={{my_car.my_model}}{%endif%}"><</a>
                                            </li>
                                        {% endif %}

                                        {% with ''|center:total as range %}
                                            {% for _ in range %}
                                                {% if forloop.counter == page %}
                                                    <li class="page-item page-link--with-arrow" style="font-weight:bold; font-size:120%;">{{page}}</li>
                                                {% elif forloop.counter > page|add:'-3' and forloop.counter < page|add:'3' %}
                                                    <li class="page-item"><a class="page-link page-link--with-arrow" href="{% url 'search_parts' %}?search={{part}}&page={{forloop.counter}}{% if model %}&modelSearch={{my_car.my_model}}{%endif%}">{{forloop.counter}}</a></li>
                                                {% endif %}
                                            {% endfor %}
                                        {% endwith %}

                                        {% if page < total %}
                                            <li class="page-item">
                                                <a class="page-link page-link--with-arrow" href="{% url 'search_parts' %}?search={{part}}&page={{page|add:'1'}}{% if model %}&modelSearch={{my_car.my_model}}{%endif%}">></a>
                                            </li>
                                            <li class="page-item">
                                                <a class="page-link page-link--with-arrow" href="{% url 'search_parts' %}?search={{part}}&page={{total}}{% if model %}&modelSearch={{my_car.my_model}}{%endif%}">>></a>
                                            </li>
                                        {% endif %}

                                    </ul>
                                </nav>
                                <div class="products-view__pagination-legend">Prikaz {{on_page}} proizvoda od ukupno {{total_parts}}</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="block-space block-space--layout--before-footer"></div>
        </div>
    </div>

    {% else %}
    <div class="block-header block-header--has-breadcrumb block-header--has-title">
        <div class="container">
            <div class="block-header__body">
                <h1 class="block-header__title">Trenutno nema dostupnih delova.</h1>
            </div>
        </div>
    </div>

    {% endif %}
</div>

{% endblock content %}